<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>云校园 ▪ 校园广场</title>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
    <meta name="viewport" content="width=device-width" />
    <meta name="keywords" content="creative tim, html dashboard, html css dashboard, web dashboard, bootstrap dashboard, bootstrap, css3 dashboard, bootstrap admin, light bootstrap dashboard, frontend, responsive bootstrap dashboard">
    <meta name="description" content="Forget about boring dashboards, get an admin template designed to be simple and beautiful.">
    <meta itemprop="name" content="Light Bootstrap Dashboard PRO by Creative Tim">
    <meta itemprop="description" content="Forget about boring dashboards, get an admin template designed to be simple and beautiful.">
    <meta name="twitter:card" content="product">
    <meta name="twitter:site" content="@creativetim">
    <meta name="twitter:title" content="Light Bootstrap Dashboard PRO by Creative Tim">
    <meta name="twitter:description" content="Forget about boring dashboards, get an admin template designed to be simple and beautiful.">
    <meta name="twitter:creator" content="@creativetim">
    <meta name="twitter:data1" content="Light Bootstrap Dashboard PRO by Creative Tim">
    <meta name="twitter:label1" content="Product Type">
    <meta name="twitter:data2" content="$29">
    <meta name="twitter:label2" content="Price">
    <meta property="og:title" content="Light Bootstrap Dashboard PRO by Creative Tim" />
    <meta property="og:type" content="article" />
    <meta property="og:description" content="Forget about boring dashboards, get an admin template designed to be simple and beautiful."
    />
    <meta property="og:site_name" content="Creative Tim" />
    <link href="newStyle/css/bootstrap.min.css" rel="stylesheet" />
    <link href="newStyle/css/light-bootstrap-dashboard.css" rel="stylesheet" />
    <link href="newStyle/css/demo.css" rel="stylesheet" />
    <link href="newStyle/css/font-awesome.min.css" rel="stylesheet">
    <link href='newStyle/css/685fd913f1e14aebad0cc9d3713ee469.css' rel='stylesheet' type='text/css'>
    <link href="newStyle/css/pe-icon-7-stroke.css" rel="stylesheet" />
    <link href="assets/font-awesome/css/font-awesome.css" rel="stylesheet" />
    <link href="assets/css/style-responsive.css" rel="stylesheet">
    <!--external css-->
    <link href="assets/font-awesome/css/font-awesome.css" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="assets/css/zabuto_calendar.css">
    <link rel="stylesheet" type="text/css" href="assets/js/gritter/css/jquery.gritter.css" />
    <link rel="stylesheet" type="text/css" href="assets/lineicons/style.css">
    <link href="assets/css/style-responsive.css" rel="stylesheet">
    <script src="assets/js/chart-master/Chart.js"></script>
    <link rel="stylesheet" href="css/nav_index.css" />
    <!--导入右键菜单样式-->
    <link rel="stylesheet" href="css/rightmenu.css" />
    <link rel="stylesheet" type="text/css" href="fonts/font_6xh809seepom9529/iconfont.css">


    <!--VUE-->
    <script src="js/vue.js"></script>
    <script src="newStyle/js/jquery.min.js" type="text/javascript"></script>

</head>

<body>
    <!--右键菜单-->
    <div id="menu">
        <ul>
            <li onclick="shuaxin()">刷新 F5</li>
            <li>复制</li>
            <li>粘贴</li>
        </ul>
    </div>

    <!--右半部分内容-->
    <div class="main-panel" style="float: none;" id="app">
        <!--右半部分导航-->
        <nav class="navbar navbar-default" id="topRight">
            <div class="container-fluid">
                <div class="navbar-minimize">
                    <button id="minimizeSidebar" class="btn btn-warning btn-fill btn-round btn-icon btn-theme">
                        <i class="fa fa-ellipsis-v visible-on-sidebar-regular"></i>
                        <i class="fa fa-navicon visible-on-sidebar-mini"></i>
                    </button>
                </div>
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
                <div class="collapse navbar-collapse">
                    <form class="navbar-form navbar-left navbar-search-form" role="search">
                        <div class="input-group">
                            <span class="input-group-addon">
                                <i class="fa fa-search"></i>
                            </span>
                            <input type="text" value="" class="form-control" placeholder="请输入课题名称...">
                        </div>
                    </form>
                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="charts.html">
                                <i class="fa fa-line-chart" title="统计"></i>
                            </a>
                        </li>

                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                <i class="fa fa-bell-o"></i>
                                <span class="notification">1</span>
                            </a>
                            <ul class="dropdown-menu">
                                <li>
                                    <a href="#">我的通知</a>
                                </li>
                                <li>
                                    <a href="#">我的邮箱</a>
                                </li>
                                <li class="divider"></li>
                                <li>
                                    <a href="nav-notice.html">公告通知</a>
                                </li>


                            </ul>
                        </li>
                        <li class="dropdown dropdown-with-icons">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                <i class="fa fa-list"></i>
                                <p class="hidden-md hidden-lg">
                                    More
                                    <b class="caret"></b>
                                </p>
                            </a>
                            <ul class="dropdown-menu dropdown-with-icons">

                                <li>
                                    <a href="#">
                                        <i class="pe-7s-help1"></i> 帮助
                                    </a>
                                </li>
                                <li>
                                    <a href="#">
                                        <i class="pe-7s-tools"></i>设置
                                    </a>
                                </li>
                                <li class="divider"></li>
                                <li>
                                    <a href="#">
                                        <i class="pe-7s-lock"></i> 锁定待机
                                    </a>
                                </li>
                                <li>
                                    <a href="out_login.html" target="_parent" class="text-danger">
                                        <i class="pe-7s-close-circle"></i>
                                        注销登录
                                    </a>
                                </li>
                                <li onclick="clostExamSystem()">
                                    <a href="#" class="text-danger">
                                        <i class="pe-7s-close-circle"></i>
                                        退出程序
                                    </a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
        <!--右半部分主体内容-->
        <div class="content">
            <div class="container-fluid container-item">
                <!--头部左面内容-->
                <div class="col-md-8 col-sm-8 mb">
                    <!--宣传-->
                    <div id="carousel-example-generic" class="carousel slide" data-ride="carousel" style=" box-shadow: 2px 3px 2px rgba(0, 0, 0, 0.3);-webkit-border-radius: 5px">
                        <ol class="carousel-indicators">
                            <li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>
                            <li data-target="#carousel-example-generic" data-slide-to="1"></li>
                            <li data-target="#carousel-example-generic" data-slide-to="2"></li>
                        </ol>
                        <div class="carousel-inner" role="listbox">
                            <div class="item active" style="height: 280px">
                                <img src="https://p.qpic.cn/qqconadmin/0/5fa75d4e52874ab18915a697a9d4bfcf/0?tp=webp" alt="" style="-webkit-border-radius: 5px;">
                                <div class="carousel-caption">
                                </div>
                            </div>
                            <div class="item" style="height: 280px">

                                <img src="https://p.qpic.cn/qqconadmin/0/915d5f4174404e65b6de81c56987548b/0" alt="..." style="-webkit-border-radius: 5px;">

                                <div class="carousel-caption">
                                </div>
                            </div>
                            <div class="item" style="height: 280px">
                                <img src="https://p.qpic.cn/qqconadmin/0/5f68f91af42e466b8fbf0a90bc8f554d/0?tp=webp" alt="..." style="-webkit-border-radius: 5px;">
                                <div class="carousel-caption">
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--显示学习进度-->
                    <div class="wrapp-tj" style="height: 690px">
                        <section id="main-content" style="height: 100%">
                            <section class="wrapper" style=" height: 100%">
                                <div class="row" style="width: 100%;padding:15px;">
                                    <div class="col-lg-12 main-chart" style="height: 100%">
                                        <div class="row mt" style="overflow: hidden;position: relative;top: 20px">
                                            <div class="border-head">
                                                <h5 style="">
                                                    本周学习进度</h5>
                                            </div>
                                            <div class="custom-bar-chart" style="height: 520px">
                                                <ul class="y-axis">


                                                    <li>
                                                        <span>900</span>
                                                    </li>
                                                    <li>
                                                        <span>800</span>
                                                    </li>
                                                    <li>
                                                        <span>700</span>
                                                    </li>
                                                    <li>
                                                        <span>600</span>
                                                    </li>
                                                    <li>
                                                        <span>500</span>
                                                    </li>
                                                    <li>
                                                        <span>400</span>
                                                    </li>
                                                    <li>
                                                        <span>300</span>
                                                    </li>
                                                    <li>
                                                        <span>200</span>
                                                    </li>
                                                    <li>
                                                        <span>100</span>
                                                    </li>
                                                    <li>
                                                        <span>0</span>
                                                    </li>
                                                </ul>
                                                <div class="bar" v-for="(item,index) in weekOne">
                                                    <div class="title" v-if="index==0">周一</div>
                                                    <div class="title" v-if="index==1">周二</div>
                                                    <div class="title" v-if="index==2">周三</div>
                                                    <div class="title" v-if="index==3">周四</div>
                                                    <div class="title" v-if="index==4">周五</div>
                                                    <div class="title" v-if="index==5">周六</div>
                                                    <div class="title" v-if="index==6">周日</div>
                                                    <div style="cursor: pointer" v-for="(items,index) in weekData" v-if="item==parseInt((items.createTime).substring(8, 11))"
                                                        :style="items.bl" :title="items.count" class="value tooltips" data-original-title=""
                                                        data-toggle="tooltip" data-placement="top"></div>
                                                </div>

                                            </div>
                                            <!--custom chart end-->
                                        </div>
                                        <!-- /row -->
                                    </div>
                                </div>
                            </section>
                        </section>


                    </div>


                </div>
                <div class="col-md-4 col-sm-4  mb">
                    <!--温度-->
                    <div class="weather-3 pn centered" style="-webkit-border-radius: 3px">
                        <i class="fa fa-sun-o" style="position: relative;left: -20px"></i>
                        <h1 class="temperature">30º C</h1>
                        <div class="info">
                            <div class="row">
                                <h3 class="centered city" style="color: #777777">北京</h3>
                                <div class="col-sm-6 col-xs-6 pull-left">
                                    <p class="goleft">
                                        <i class="fa fa-tint" style="color: #777777"></i>
                                        <span class="humidity" style="color: #777777"></span>
                                    </p>
                                </div>
                                <div class="col-sm-6 col-xs-6 pull-right">
                                    <p class="goright">
                                        <i class="fa fa-flag" style="color: #777777"></i>
                                        <span style="color: #777777" class="windDirection"></span>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--新闻-->
                    <div class="gongGao">
                        <div class="gongGao-top">
                            <img src="https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=428108013,2443178233&fm=27&gp=0.jpg">
                        </div>
                        <div class="gongGao-bottom">
                            <h6 style="height: 15px;;margin-top: 15px;text-indent: 1em"> ▪ 每日新闻</h6>
                            <p>
                                经常逛论坛的朋友，或许会注意到，网站首页经常会看到一些滚动的网站公告语。

                            </p>

                        </div>

                    </div>
                    <!--日历-->
                    <div id="calendar" class="mb" style="box-shadow: 2px 3px 2px rgba(0, 0, 0, 0.3);-webkit-border-radius: 5px;margin-bottom: 55px;margin-top: 15px;height: 381px">
                        <div class="panel green-panel no-margin" style="background-color: #94caf2;color: #ffffff;height: 100%">
                            <div class="panel-body">
                                <div id="date-popover" class="popover top" style="cursor: pointer; disadding: block; margin-left: 33%; margin-top: -50px; width: 175px;">
                                    <div class="arrow"></div>
                                    <h3 class="popover-title" style="disadding: none;"></h3>
                                    <div id="date-popover-content" class="popover-content"></div>
                                </div>
                                <div id="my-calendar"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--校园风云榜-->
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-12">
                        <div class="card">
                            <div class="content">
                                <div class="toolbar toolbar-item">
                                    <i class="pe-7s-ribbon" style="position: relative;top: 8px;left: -20px;font-weight: bold;color: #ffffff;font-size: 36px;width: 20px;left: -60px"></i>
                                    校园风云榜 ▪ TOP 10
                                </div>
                                <div class="fresh-datatables">
                                    <table id="datatables" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">
                                        <thead>
                                            <tr>
                                                <th>校园排名</th>
                                                <th>学生姓名</th>
                                                <th>学生班级</th>
                                                <th>答题总数</th>
                                                <th style="box-shadow: 1px 1px 1px 1px #bdbdbd; width: 120px;text-align: center;background-color: #ff938b;color: #ffffff;-webkit-border-top-left-radius: 20px;-webkit-border-top-right-radius: 20px;text-align: center">
                                                    实际答题
                                                </th>
                                                <th style="text-align: center">正确率</th>
                                                <th class="disabled-sorting text-right">查看</th>
                                            </tr>
                                        </thead>
                                        <tfoot>
                                            <tr>
                                                <th>校园排名</th>
                                                <th>学生姓名</th>
                                                <th>学生班级</th>
                                                <th>答题总数</th>
                                                <th style="box-shadow: 1px 1px 1px 1px #bdbdbd; width: 120px; text-align: center; background-color: #ff938b;color: #ffffff;-webkit-border-bottom-left-radius: 20px;-webkit-border-bottom-right-radius: 20px;text-align: center">
                                                    实际答题
                                                </th>
                                                <th style="text-align: center">正确率</th>
                                                <th class="disabled-sorting text-right">查看</th>
                                            </tr>
                                        </tfoot>
                                        <tbody>
                                            <tr v-if="rankings==''">
                                                <td colspan="7" style="text-align: center">暂无排名</td>
                                            </tr>
                                            <tr style="cursor: pointer" v-for="(item,index) in rankings">
                                                <td>{{index+1}}</td>
                                                <td>{{item.studentName}}</td>
                                                <td>{{item.className}}</td>

                                                <td>{{item.sumCount}}道</td>
                                                <td style="box-shadow: 1px 1px 1px 1px #bdbdbd;width: 120px;text-align: center; background-color: #ff938b;color: #ffffff;text-align: center">
                                                    {{item.sumCorrectCount}}道
                                                </td>
                                                <td style="text-align: center">{{correctRate[index]}}%</td>
                                                <td class="text-right">
                                                    <a href="#" class="btn btn-simple btn-info btn-icon like" title="查看个人中心">
                                                        <i class="pe-7s-id" style="color: #2e2e2e;font-weight: bold;font-size: 18px"></i>
                                                    </a>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <!-- end content-->
                        </div>
                        <!--  end card  -->
                    </div>
                    <!-- end col-md-12 -->
                </div>
                <!-- end row -->
            </div>
        </div>
        <!--底部-->
        <footer class="footer">
            <div class="container-fluid">
                <p class="copyright pull-right">
                    &copy; 2018
                    <a href="#">云校园</a>，梦想带你起航
                </p>
            </div>
        </footer>
    </div>
    </div>

    <!-- 评教评学模态框-->
    <div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h5 class="modal-title" id="myModalLabel">
                        <label>评教评学</label>
                    </h5>
                </div>
                <div class="modal-body">
                    <table class="table btn-hover">
                        <thead>
                            <tr>
                                <td>评教对象</td>
                                <td>开始时间</td>
                                <td>结束时间</td>
                                <td>操作</td>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>马守斌</td>
                                <td>2018-05-31</td>
                                <td>2018-05-31</td>
                                <td>
                                    <a class="btn btn-primary">
                                        <i class="pe-7s-right-arrow" href="module_appraisalReviewLearning.html"></i>开始测评</a>
                                </td>
                            </tr>
                            <tr>
                                <td>马守斌</td>
                                <td>2018-05-31</td>
                                <td>2018-05-31</td>
                                <td>
                                    <a class="btn btn-primary">
                                        <i class="pe-7s-right-arrow" href="module_appraisalReviewLearning.html"></i>开始测评</a>
                                </td>
                            </tr>
                            <tr>
                                <td>马守斌</td>
                                <td>2018-05-31</td>
                                <td>2018-05-31</td>
                                <td>
                                    <a class="btn btn-primary" href="module_appraisalReviewLearning.html">
                                        <i class="pe-7s-right-arrow"></i>开始测评</a>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-warning" data-dismiss="modal">
                        <i class="pe-7s-back">&nbsp;</i>关闭
                    </button>
                </div>
            </div>
        </div>
    </div>
    </div>

    <!--VUE模块-->
    <script>
        var lo = "localhost";
        var app = new Vue({
            el: '#app',
            data: {
                rankings: [],
                correctRate: [],
                weekData: [],
                weekOne: []
            },
            methods: {
                getSpecialTrain() {
                    $.post("http://" + lo + ":8080/SpecialTrain/selectSpecialTrainPH", {}, function (date) {
                        console.log("加载排行榜" + date);
                        var arr = [];
                        for (var i = 0; i < date.length; i++) {
                            var num = date[i].sumCorrectCount / date[i].sumCount * 100;
                            var newNum = Math.floor(num)
                            arr[i] = newNum;
                        }

                        app.correctRate = arr;
                        app.rankings = date;
                    }, "json");
                },
                getWeek() {
                    var userInfo = localStorage.getItem("user");
                    var obj = JSON.parse(userInfo);
                    console.log(obj.studentId);

                    //var bili = ((data[i].count / 3000) * 100 * 30) / 5
                    //http://localhost:8080/SpecialTrainTest/selectSpecialTraiinTestCountTest?studentId=2
                    $.post("http://" + lo + ":8080/SpecialTrainTest/selectSpecialTraiinTestCountTest", { "studentId": obj.studentId }, function (data) {
                        for (var i = 0; i < data.length; i++) {
                            var bili = ((data[i].count / 3000) * 100 * 30) / 8;//算比例
                            bili -= 0.5;
                            var value = parseInt((data[i].createTime).substring(8, 11))
                            console.log(value); //22
                            // 21 22 23 24 25 26 27
                            data[i] = {
                                "count": data[i].count,
                                "createTime": data[i].createTime,
                                "id": data[i].id,
                                "bl": "height:" + parseInt(bili) + "%",
                                "isShow": ""
                            }
                        }
                        app.weekData = data;
                        console.log(app.weekData);
                    }, "json");
                },
                isInArray3(value) {


                },
                getFirstDayOfWeek(date) {
                    var day = date.getDay() || 7;
                    return new Date(date.getFullYear(), date.getMonth(), date.getDate() + 1 - day);
                },
                stringToDate(fDate) {
                    var fullDate = fDate.split("-");
                    return new Date(fullDate[0], fullDate[1] - 1, fullDate[2], 0, 0, 0);
                },
            },
            created() {
                var now = new Date(); //当前日期
                var day = this.getFirstDayOfWeek(new Date) //返回本周一
                var newDay = parseInt(day.getDate())
                var arr = new Array();
                arr[0] = newDay;
                arr[1] = newDay + 1;
                arr[2] = newDay + 2;
                arr[3] = newDay + 3;
                arr[4] = newDay + 4;
                arr[5] = newDay + 5;
                arr[6] = newDay + 6;
                this.weekOne = arr;
                this.getSpecialTrain();//加载校园风云榜
                this.getWeek()//加载本周学习进度
            }
        })
    </script>
</body>
<!--导入JS-->
<script src="newStyle/js/jquery-ui.min.js" type="text/javascript"></script>
<script src="newStyle/js/bootstrap.min.js" type="text/javascript"></script>
<script src="newStyle/js/jquery.validate.min.js"></script>
<script src="newStyle/js/moment.min.js"></script>
<script src="assets/js/sparkline-chart.js"></script>
<script src="assets/js/zabuto_calendar.js"></script>
<script src="newStyle/js/bootstrap-datetimepicker.js"></script>
<script src="newStyle/js/bootstrap-selectpicker.js"></script>
<script src="newStyle/js/bootstrap-checkbox-radio-switch-tags.js"></script>
<script src="newStyle/js/chartist.min.js"></script>
<script src="newStyle/js/bootstrap-notify.js"></script>
<script src="newStyle/js/sweetalert2.js"></script>
<script src="newStyle/js/jquery-jvectormap.js"></script>
<script src="newStyle/js/jquery.bootstrap.wizard.min.js"></script>
<script src="newStyle/js/bootstrap-table.js"></script>
<script src="newStyle/js/jquery.datatables.js"></script>
<script src="newStyle/js/fullcalendar.min.js"></script>
<script src="newStyle/js/light-bootstrap-dashboard.js"></script>
<script src="newStyle/js/jquery.sharrre.js"></script>
<script src="newStyle/js/demo.js"></script>

<!--初始化-->
<script>
    var userInfoInit;//用户信息
    var btn = true;//导航栏状态
    //var gui = require('nw.gui');
    $(function () {
        getUserInfo();
        notice();
        var height = $(window).height();
        $(".container-main").css("height", height);//设置初始化高度
        $(window).resize(function () {//设置窗口改变时的高度
            var height = $(window).height();
            $(".container-main").css("height", height)
        });
        getTheme();


    });
    //退出应用程序
    function clostExamSystem() {
        //gui.App.quit()
    }
    //取出主题并设置上
    function getTheme() {
        var getTheme = localStorage.getItem("theme");
        $(".sidebar").attr("data-color", getTheme);
        var imgPath = localStorage.getItem("imgPath");
        $(".sidebar").attr("data-image", imgPath);
        $(".sidebar-background").css("background-image", 'url(' + imgPath + ')');

    }
    //设置通知
    function notice() {
        demo.showNotification('bottom', 'right', 'success', '' + userInfoInit.studentName + '', '欢迎您进入学习时间', 'pe-7s-smile');
    }
    //初始化用户信息&设置
    function getUserInfo() {
        var userInfo = localStorage.getItem("user");
        var obj = JSON.parse(userInfo);
        userInfoInit = obj;
        $(".userName").html(userInfoInit.studentName + '  <b class="caret"></b>')
        imgLogoInit();
    }
    //初始化头像
    function imgLogoInit() {
        $(".photo").html('  <img src="http://localhost:8080/upload/' + userInfoInit.imgFilePath + '.jpg"/>')
    }
</script>
<!--日期-->
<script type="application/javascript">
    $(document).ready(function () {
        $("#date-popover").popover({ html: true, trigger: "manual" });
        $("#date-popover").hide();
        $("#date-popover").click(function (e) {
            $(this).hide();
        });

        $("#my-calendar").zabuto_calendar({
            action_nav: function () {
                return myNavFunction(this.id);
            },


        });
    });


    function myNavFunction(id) {
        $("#date-popover").hide();
        var nav = $("#" + id).data("navigation");
        var to = $("#" + id).data("to");
        console.log('nav ' + nav + ' to: ' + to.month + '/' + to.year);
    }
</script>
<!--右键菜单-->
<script type="text/javascript">
    var menu = document.getElementById("menu");
    document.oncontextmenu = function (ev) {
        var oEvent = ev || event;
        //自定义的菜单显示
        menu.style.display = "block";
        //让自定义菜单随鼠标的箭头位置移动
        menu.style.left = oEvent.clientX + "px";
        menu.style.top = oEvent.clientY + "px";
        //return false阻止系统自带的菜单，
        //return false必须写在最后，否则自定义的右键菜单也不会出现
        return false;

    }
    //实现点击document，自定义菜单消失
    document.onclick = function () {

        menu.style.display = "none";
    }
    function shuaxin() {
        location.reload();
    }
</script>
<!--定位功能-->
<script language="javascript" src="https://webapi.amap.com/maps?v=1.4.6&key=b339804f5ffda5c3e6556ad23ac96366"></script>
<script language="javascript">
    var map;
    $(function () {
        mapInit();
    });
    function mapInit() {
        AMap.service('AMap.Weather', function () {
            var weather = new AMap.Weather();
            weather.getLive("北京市", function (err, data) {
                if (!err) {
                    $(".city").text((data.city).substr(0, 2));
                    $(".temperature").text(data.temperature + "°C");
                    $(".windDirection").text("风向:" + data.windDirection);
                    $(".humidity").text("空气湿度:" + data.humidity);

                    console.log("城市：" + data.city);
                    console.log("温度：" + data.temperature);
                    console.log("天气：" + data.weather);
                    console.log("风向：" + data.windDirection);
                    console.log("风力：" + data.windPower);
                    console.log("空气湿度：" + data.humidity);
                    console.log("发布时间：" + data.reportTime);
                }
            });
        });

        //        map = new AMap.Map('container', {});
        //        map.plugin(['AMap.Geolocation'], function () {
        //            geolocation = new AMap.Geolocation({
        //                enableHighAccuracy: true,
        //                timeout: 100,
        //            });
        //            geolocation.getCurrentPosition();
        //            AMap.event.addListener(geolocation, 'complete', onComplete);
        //            AMap.event.addListener(geolocation, 'error', onError);
        //        });
        //        function onComplete(data) {
        //            //data.formattedAddress
        //            var str = data.formattedAddress;
        //            var newStr = str.substr(0, 3)
        //            console.log(data.formattedAddress);
        //            console.log(newStr);
        //            console.log('经度：' + data.position.getLng());
        //            console.log('纬度：' + data.position.getLat());
        //            AMap.service('AMap.Weather', function () {
        //                var weather = new AMap.Weather();
        //                weather.getLive("北京市", function (err, data) {
        //                    if (!err) {
        //                        $(".city").text((data.city).substr(0, 2));
        //                        $(".temperature").text(data.temperature + "°C");
        //                        $(".windDirection").text("风向:" + data.windDirection);
        //                        $(".humidity").text("空气湿度:" + data.humidity);
        //
        //                        console.log("城市：" + data.city);
        //                        console.log("温度：" + data.temperature);
        //                        console.log("天气：" + data.weather);
        //                        console.log("风向：" + data.windDirection);
        //                        console.log("风力：" + data.windPower);
        //                        console.log("空气湿度：" + data.humidity);
        //                        console.log("发布时间：" + data.reportTime);
        //                    }
        //                });
        //            });
        //        }
        //
        //        function onError(data) {
        //            console.log("获取天气预报信息失败" + data);
        //        }
    }


</script>

</html>